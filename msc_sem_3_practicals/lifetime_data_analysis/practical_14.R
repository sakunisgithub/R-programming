rm(list=ls())
library(survival)

# age <- c(75,55,65,50,65,90,75,60,65,80,
#           75,62,45,50,49,82,87,45,70,48,
#           65,65,68,53,75,80,95,70,58,82,
#           94,85,50,50,65,69,90,82,60,60,
#           70,50,51,60,80)
# anaemia <- c(0,0,0,1,1,1,1,1,0,1,
#               1,0,1,1,1,1,1,0,1,1,
#               1,1,1,0,0,0,1,0,1,0,
#               0,1,1,1,0,0,1,1,0,0,
#               0,0,0,0,1)
# creatinine_phosphokinase <- c(582,7861,146,111,160,47,246,315,157,123,
#                                81,231,981,168,80,379,149,582,125,582,
#                                52,128,220,63,582,148,112,122,60,70,
#                                582,23,249,159,94,582,60,855,2656,235,
#                                582,124,1380,582,553)
# diabetes <- c(0,0,0,0,1,0,0,1,0,0,
#                0,0,0,0,0,0,0,0,0,1,
#                0,1,0,1,1,0,0,1,0,1,
#                1,0,1,1,1,1,1,1,1,0,
#                0,1,0,1,0)
# ejection_fraction <- c(20,38,20,20,20,40,15,60,65,35,
#                         38,25,30,38,30,50,38,14,25,55,
#                         25,30,35,60,30,38,40,45,38,30,
#                         38,45,35,30,50,35,50,50,30,38,
#                         20,30,25,38,20)
# high_blood_pressure <- c(1,0,0,0,0,1,0,0,0,1,
#                           1,1,0,1,1,0,0,0,1,0,
#                           1,1,1,0,1,0,1,1,0,0,
#                           1,0,1,0,1,0,0,1,0,0,
#                           1,1,1,1,1)
# platelets <- c(265000,263358,162000,210000,327000,204000,127000,454000,263358,388000,
#                 368000,253000,136000,276000,427000,47000,262000,166000,237000,87000,
#                 276000,297000,289000,368000,263358,149000,196000,284000,153000,200000,
#                 263358,360000,319000,302000,188000,228000,226000,321000,305000,329000,
#                 263358,153000,271000,451000,140000)
# serum_creatinine <- c(1.9,1.1,1.3,1.9,2.7,2.1,1.2,1.1,1.5,9.4,
#                        4.0,0.9,1.1,1.1,1.0,1.3,0.9,0.8,1.0,1.9,
#                        1.3,1.6,0.9,0.8,1.83,1.9,1.0,1.3,5.8,1.2,
#                        1.83,3.0,1.0,1.2,1.0,3.5,1.0,1.0,2.3,3.0,
#                        1.83,1.2,0.9,0.6,4.4)
# serum_sodium <- c(130,136,129,137,116,132,137,131,138,133,
#                    131,140,137,137,138,136,140,127,140,121,
#                    137,136,140,135,134,144,138,136,134,132,
#                    134,132,128,138,140,134,134,145,137,142,
#                    134,136,130,138,133)
# sex <- c(1,1,1,1,0,1,1,1,0,1,
#           1,1,1,1,0,1,1,1,0,0,
#           0,0,1,1,0,1,0,1,1,1,
#           1,1,0,0,1,1,1,0,1,0,
#           1,0,1,1,1)
# smoking <- c(0,0,1,0,0,1,0,1,0,1,
#               1,1,0,0,0,0,0,0,0,0,
#               0,0,1,0,0,1,0,1,0,1,
#               0,0,0,0,0,0,0,0,0,0,
#               1,1,0,1,0)
# time <- c(4,6,7,7,8,8,10,10,10,10,
#            10,10,11,11,12,13,14,14,15,15,
#            16,20,20,22,23,23,24,26,26,26,
#            27,28,28,29,29,30,30,30,30,30,
#            31,32,38,40,41)
# death_event <- c(1,1,1,1,1,1,1,1,1,1,
#                   1,1,1,1,0,1,1,1,1,1,
#                   0,1,1,0,1,1,0,1,0,1,
#                   1,1,0,0,1,1,0,0,0,1,
#                   1,1,1,1,1)
# 
# df <- data.frame(Age = age, anaemia = anaemia, creatinine_phosphokinase, diabetes, ejection_fraction,
#                    high_blood_pressure, platelets, serum_creatinine, serum_sodium, sex,
#                    smoking, time, death_event)
# df

df <- read.csv('https://raw.githubusercontent.com/sakunisgithub/data_sets/refs/heads/master/msc_semester_3/Data_Heart_Fail-life_time_practical_14.csv')

cox_model <- coxph(Surv(time, DEATH_EVENT) ~ age + ejection_fraction + serum_creatinine, data = df)

summary(cox_model)

exp(coef(cox_model))

exp(confint(cox_model))
